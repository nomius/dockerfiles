server:
	# If no logfile is specified, syslog is used
	#logfile: "/var/log/unbound.log"
	verbosity: 3

	interface: 0.0.0.0
	interface: ::0
	port: 5335
	do-ip4: yes
	do-udp: yes
	do-tcp: yes

	# May be set to yes if you have IPv6 connectivity
	do-ip6: no #yes

	# You want to leave this to no unless you have *native* IPv6. With 6to4 and
	# Terredo tunnels your web browser should favor IPv4 for the same reasons
	prefer-ip6: no

	# Use this only when you downloaded the list of primary root servers!
	# If you use the default dns-root-data package, unbound will find it automatically
	#root-hints: "/var/lib/unbound/root.hints"

	# Trust glue only if it is within the server's authority
	harden-glue: yes

   	# Sent minimum amount of information to upstream servers to enhance
	# privacy. Only sent minimum required labels of the QNAME and set QTYPE
	# to A when possible.
	qname-minimisation: yes

	# Do not query the following addresses. No DNS queries are sent there.
	# List one address per entry. List classless netblocks with /size,
	do-not-query-address: 127.0.0.1/8
	do-not-query-address: ::1

	# if yes, the above default do-not-query-address entries are present.
	# if no, localhost can be queried (for testing and debugging).
	#do-not-query-localhost: yes

	# Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS
	harden-dnssec-stripped: yes

	# Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes
	# see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details
	use-caps-for-id: no

	# Reduce EDNS reassembly buffer size.
	# IP fragmentation is unreliable on the Internet today, and can cause
	# transmission failures when large DNS messages are sent via UDP. Even
	# when fragmentation does work, it may not be secure; it is theoretically
	# possible to spoof parts of a fragmented DNS message, without easy
	# detection at the receiving end. Recently, there was an excellent study
	# >>> Defragmenting DNS - Determining the optimal maximum UDP response size for DNS <<<
	# by Axel Koolhaas, and Tjeerd Slokker (https://indico.dns-oarc.net/event/36/contributions/776/)
	# in collaboration with NLnet Labs explored DNS using real world data from the
	# the RIPE Atlas probes and the researchers suggested different values for
	# IPv4 and IPv6 and in different scenarios. They advise that servers should
	# be configured to limit DNS messages sent over UDP to a size that will not
	# trigger fragmentation on typical network links. DNS servers can switch
	# from UDP to TCP when a DNS response is too big to fit in this limited
	# buffer size. This value has also been suggested in DNS Flag Day 2020.
	edns-buffer-size: 1232

	# Perform prefetching of close to expired message cache entries
	# This only applies to domains that have been frequently queried
	prefetch: yes

	# One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.
	num-threads: 1

	# Ensure kernel buffer is large enough to not lose messages in traffic spikes
	so-rcvbuf: 1m

	# CA Certificates used for forward-tls-upstream (RFC7858) hostname
	# verification.  Since it's outside the chroot it is only loaded at
	# startup and thus cannot be changed via a reload.
	tls-cert-bundle: "/etc/ssl/certs/ca-certificates.crt"

	# Ensure privacy of local IP ranges
	private-address: 127.0.0.1/32
	private-address: 192.168.0.0/16
	private-address: 169.254.0.0/16
	private-address: 172.16.0.0/12
	private-address: 10.0.0.0/8
	private-address: fd00::/8
	private-address: fe80::/10
	private-address: 2803:9800:b8ca:80ac::/64

	access-control: 0.0.0.0/0 allow

	domain-insecure: "piracy"

local-zone: "home." static
	local-data: "host1.home. IN A 10.0.0.2"
	local-data: "host1.home. IN AAAA 2024::2025"
	local-data-ptr: "10.0.0.2 host1.home"

forward-zone:
	name: "."
	forward-tls-upstream: yes	# use DNS-over-TLS forwarder
	forward-first: no			# do NOT send direct
	#forward-addr:  185.222.222.22@853#dot.sb
	#forward-addr:  45.11.45.11@853#dot.sb
	#forward-addr:  2a09::@853#dot.sb
	#forward-addr:  2a11::@853#dot.sb
	
	#forward-addr: 2606:4700:4700::1111@853#cloudflare-dns.com
	forward-addr: 1.1.1.1@853#cloudflare-dns.com
	#forward-addr: 2606:4700:4700::1001@853#cloudflare-dns.com
	forward-addr: 1.0.0.1@853#cloudflare-dns.com

remote-control:
	control-enable: no
